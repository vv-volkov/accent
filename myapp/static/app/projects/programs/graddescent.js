Ext.define('graddescent.view.GraddescentViewport',{
    extend:'Ext.form.Panel',
    alias:'widget.graddescent',
    layout:'border',
    border:false,
    defaults:{
        border:false
    },
    items:[{
        region:'west',
        xtype:'panel',
        width:'40%',
        preventHeader:true,
        collapsible:true,
        collapseMode:'mini',
        split:true,
        layout:'border',
        defaults:{
            autoScroll:true,
            collapsible:true,
            height:'50%'
        },
        items:[{
            region:'north',
            title:'Постановка задачи и алгоритм решения',
            contentEl:'math'
        },{
            region:'center',
            xtype:'form',
            title:'Параметры',  
            bodyStyle:'padding:4px;',
            items:[{
                xtype:'fieldset',
                title:'Основные',
                layout:'column',
                defaults:{
                    margin:'2 0 2 0'
                },
                items:[{
                    xtype:'label',
                    contentEl:'x0',
                    columnWidth:'0.2'
                },{
                    xtype:'numberfield',
                    columnWidth:'0.8',
                    value:'2',
                    itemId:'x0'
                },{
                    xtype:'label',
                    contentEl:'y0',
                    columnWidth:'0.2'                    
                },{
                    xtype:'numberfield',
                    columnWidth:'0.8',
                    value:'-3',
                    itemId:'y0'
                },{
                    xtype:'label',
                    contentEl:'delta',
                    columnWidth:'0.2'
                },{
                    xtype:'numberfield',
                    columnWidth:'0.8',
                    value:'0.1',
                    allowDecimals:true,
                    decimalPrecision:4,
                    itemId:'delta'
                },{
                    xtype:'label',
                    contentEl:'theta',
                    columnWidth:'0.2'                    
                },{
                    xtype:'numberfield',
                    columnWidth:'0.8',
                    allowDecimals:true,
                    decimalPrecision:4,
                    value:'0.0001',
                    itemId:'theta'
                }]
            },{
                xtype:'fieldset',
                title:'Дополнительные',
                defaults:{
                    margin:'2 0 2 0'
                },
                layout:'column',
                items:[{
                    xtype:'label',
                    text:'Метод',
                    columnWidth:'0.2'                    
                },{
                    xtype:'combobox',
                    store:[[1,'Наискорейший спуск']],
                    name:'method',
                    columnWidth:'0.8',
                    itemId:'method',
                    listeners:{
                        change:function(){
                            if(this.getValue()&&this.getValue()!=null){
                                this.up('viewport').down('#delta').setDisabled(true);
                            }
                            else this.up('viewport').down('#delta').setDisabled(false);
                        }
                    }
                }]
            }],
            dockedItems:[{
                xtype:'toolbar',
                dock:'bottom',
                ui:'footer',
                defaults:{
                    width:100
                },
                items:[{
                    xtype:'button',
                    text:'Обновить',
                    icon:'/static/app/img/refresh.png',
                    handler:function(){
                        this.up('form').getForm().reset();
                    }
                },{
                    xtype:'button',
                    text:'Решить',
                    icon:'/static/app/img/check.png',
                    handler:function(){
                        optimize(this.up('toolbar').up('viewport'));
                        lineCurve2D(this.up('toolbar').up('viewport'),1);
                        lineCurve2D(this.up('toolbar').up('viewport'),2);                        
                    }
                },{
                    xtype:'button',
                    text:'Шаг',
                    icon:'/static/app/img/step.png',
                    handler:function(){
                    
                    }
                }]
            }]
        }]
    },{
        region:'center',
        xtype:'panel',
        title:'Решение',
        width:'60%',
        layout:'column',
        defaults:{
            margin:'4 2 2 4',
            layout:'fit'
        },
        items:[{
            xtype:'fieldset',
            title:'Линии уровня (2D)',
            columnWidth:'0.5',
            itemId:'LineCurve2D',           
            height:'45%'
        },{
            xtype:'fieldset',
            title:'Поверхность (3D)',
            columnWidth:'0.5',
            itemId:'Surface3D',
            height:'45%'
        },{
            xtype:'fieldset',
            title:'Градиентный спуск',
            columnWidth:'0.5',
            height:'50%',
            itemId:'Map2D',
        },{
            xtype:'fieldset',
            title:'Результат',
            columnWidth:'0.5',
            height:'50%',
            //bodyStyle:'padding:4px;',
            layout:'column',
            defaults:{
                margin:'2 0 2 0'
            },
            items:[{
                xtype:'label',
                contentEl:'xstar',
                columnWidth:'0.2'
            },{
                xtype:'numberfield',
                columnWidth:'0.8',
                allowDecimals:true,
                decimalPrecision:10,
                itemId:'xstar',
                readOnly:true,
                name:'xstar'
            },{
                xtype:'label',
                contentEl:'ystar',
                columnWidth:'0.2'
            },{
                xtype:'numberfield',
                columnWidth:'0.8',
                allowDecimals:true,
                decimalPrecision:10,
                itemId:'ystar',
                readOnly:true,
                name:'ystar'
            },{
                xtype:'label',
                contentEl:'qstar',
                columnWidth:'0.2'
            },{
                xtype:'numberfield',
                columnWidth:'0.8',
                allowDecimals:true,
                decimalPrecision:10,
                itemId:'qstar',
                readOnly:true,
                name:'qstar'
            }]
        }]
    }]
})